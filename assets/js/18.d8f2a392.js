(window.webpackJsonp=window.webpackJsonp||[]).push([[18],{258:function(t,s,e){"use strict";e.r(s);var a=e(0),n=Object(a.a)({},(function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[e("h1",{attrs:{id:"install-gny-blockchain"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#install-gny-blockchain"}},[t._v("#")]),t._v(" Install GNY Blockchain")]),t._v(" "),e("p",[t._v("Ubuntu 18.04.3 LTS or higher is required!")]),t._v(" "),e("h2",{attrs:{id:"install-linux-dependencies"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#install-linux-dependencies"}},[t._v("#")]),t._v(" Install Linux Dependencies")]),t._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v('sudo apt-get install curl ntp wget git libssl-dev openssl make gcc g++ autoconf automake python build-essential -y\n\nsudo apt-get install libtool libtool-bin -y\n\n# Install nvm\ncurl -o- https://raw.githubusercontent.com/creationix/nvm/v0.33.2/install.sh | bash\n# This loads nvm\nexport NVM_DIR="$HOME/.nvm"\n[ -s "$NVM_DIR/nvm.sh" ] && \\. "$NVM_DIR/nvm.sh"\n[ -s "$NVM_DIR/bash_completion" ] && \\. "$NVM_DIR/bash_completion"  # This loads nvm bash_completion\n\nnvm install           # install node version in .nvmrc file\nnvm use               # uses node version in the .nvmrc file\nnvm alias default     # set node version in .nvmrc as default one\n')])]),t._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[t._v("1")]),e("br"),e("span",{staticClass:"line-number"},[t._v("2")]),e("br"),e("span",{staticClass:"line-number"},[t._v("3")]),e("br"),e("span",{staticClass:"line-number"},[t._v("4")]),e("br"),e("span",{staticClass:"line-number"},[t._v("5")]),e("br"),e("span",{staticClass:"line-number"},[t._v("6")]),e("br"),e("span",{staticClass:"line-number"},[t._v("7")]),e("br"),e("span",{staticClass:"line-number"},[t._v("8")]),e("br"),e("span",{staticClass:"line-number"},[t._v("9")]),e("br"),e("span",{staticClass:"line-number"},[t._v("10")]),e("br"),e("span",{staticClass:"line-number"},[t._v("11")]),e("br"),e("span",{staticClass:"line-number"},[t._v("12")]),e("br"),e("span",{staticClass:"line-number"},[t._v("13")]),e("br"),e("span",{staticClass:"line-number"},[t._v("14")]),e("br")])]),e("h2",{attrs:{id:"install-docker-and-docker-compose"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#install-docker-and-docker-compose"}},[t._v("#")]),t._v(" Install Docker and Docker-Compose")]),t._v(" "),e("blockquote",[e("p",[t._v("Follow "),e("a",{attrs:{href:"https://docs.docker.com/install/linux/docker-ce/ubuntu/",target:"_blank",rel:"noopener noreferrer"}},[t._v("this Tutorial"),e("OutboundLink")],1),t._v(" to install "),e("strong",[t._v("Docker")]),t._v(" and "),e("a",{attrs:{href:"https://docs.docker.com/compose/install/",target:"_blank",rel:"noopener noreferrer"}},[t._v("this Tutorial"),e("OutboundLink")],1),t._v(" to install "),e("strong",[t._v("Docker-Compose")]),t._v(".")])]),t._v(" "),e("br"),t._v(" "),e("h2",{attrs:{id:"clone-repository"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#clone-repository"}},[t._v("#")]),t._v(" Clone Repository")]),t._v(" "),e("p",[t._v("Clone this repository:")]),t._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[t._v("git")]),t._v(" clone https://github.com/gnyio/gny-experiment gny-experiment "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&&")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("cd")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$_")]),t._v("\n")])]),t._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[t._v("1")]),e("br")])]),e("h3",{attrs:{id:"install-dependencies"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#install-dependencies"}},[t._v("#")]),t._v(" Install Dependencies")]),t._v(" "),e("p",[t._v("Install exactly the dependencies from "),e("code",[t._v("package-lock.json")]),t._v(" with "),e("code",[t._v("npm ci")]),t._v(":")]),t._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[t._v("npm")]),t._v(" ci\n")])]),t._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[t._v("1")]),e("br")])]),e("h3",{attrs:{id:"install-sub-packages"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#install-sub-packages"}},[t._v("#")]),t._v(" Install Sub-Packages")]),t._v(" "),e("p",[t._v("Bootstrap all "),e("a",{attrs:{href:"https://github.com/lerna/lerna",target:"_blank",rel:"noopener noreferrer"}},[t._v("lerna.js"),e("OutboundLink")],1),t._v(" packages with:")]),t._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[t._v("npm")]),t._v(" run lerna:bootstrap\n")])]),t._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[t._v("1")]),e("br")])]),e("h3",{attrs:{id:"transpile-typescript"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#transpile-typescript"}},[t._v("#")]),t._v(" Transpile TypeScript")]),t._v(" "),e("p",[t._v("Transpile all "),e("a",{attrs:{href:"https://github.com/lerna/lerna",target:"_blank",rel:"noopener noreferrer"}},[t._v("lerna.js"),e("OutboundLink")],1),t._v(" packages with:")]),t._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[t._v("npm")]),t._v(" run lerna:tsc\n")])]),t._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[t._v("1")]),e("br")])]),e("h3",{attrs:{id:"start-node"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#start-node"}},[t._v("#")]),t._v(" Start Node")]),t._v(" "),e("p",[t._v("Start a postgres docker container:")]),t._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# start POSTGRESQL database on port 3000")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("sudo")]),t._v(" docker run --env "),e("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("POSTGRES_PASSWORD")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("docker --env "),e("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("POSTGRES_DB")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("postgres --env "),e("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("POSTGRES_USER")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("postgres -p "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("3000")]),t._v(":5432 postgres\n")])]),t._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[t._v("1")]),e("br"),e("span",{staticClass:"line-number"},[t._v("2")]),e("br")])]),e("p",[t._v("Open a new "),e("code",[t._v("console")]),t._v(" and start the GNY blockchain:")]),t._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[t._v("node packages/main/dist/src/app\n")])]),t._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[t._v("1")]),e("br")])]),e("p",[t._v("Default ports:")]),t._v(" "),e("table",[e("thead",[e("tr",[e("th",{staticStyle:{"text-align":"center"}},[t._v("Service")]),t._v(" "),e("th",{staticStyle:{"text-align":"center"}},[t._v("Port")]),t._v(" "),e("th",{staticStyle:{"text-align":"center"}},[t._v("Where to change")])])]),t._v(" "),e("tbody",[e("tr",[e("td",{staticStyle:{"text-align":"center"}},[t._v("Postgres")]),t._v(" "),e("td",{staticStyle:{"text-align":"center"}},[t._v("3000")]),t._v(" "),e("td",{staticStyle:{"text-align":"center"}},[e("code",[t._v("ormconfig.json")])])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"center"}},[t._v("Blockchain-API")]),t._v(" "),e("td",{staticStyle:{"text-align":"center"}},[t._v("4096")]),t._v(" "),e("td",{staticStyle:{"text-align":"center"}},[e("code",[t._v("config.json")])])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"center"}},[t._v("Blockchain-P2P")]),t._v(" "),e("td",{staticStyle:{"text-align":"center"}},[t._v("4096+1")]),t._v(" "),e("td",{staticStyle:{"text-align":"center"}},[t._v("Can't be changed! Always API-Port +1")])])])]),t._v(" "),e("blockquote",[e("p",[e("strong",[t._v("Attention")]),t._v("\nAfter changing ports be sure to rebuild the project with "),e("code",[t._v("npm run tsc")])])]),t._v(" "),e("br"),t._v(" "),e("h2",{attrs:{id:"extra-run-whole-blockchain-only-in-docker"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#extra-run-whole-blockchain-only-in-docker"}},[t._v("#")]),t._v(" Extra: Run whole Blockchain only in Docker")]),t._v(" "),e("p",[t._v("First verify that you executed the "),e("a",{attrs:{href:"#Installation"}},[t._v("Installation")]),t._v(" process.")]),t._v(" "),e("p",[t._v("The following command builds the image for the GNY Blockchain node and the "),e("code",[t._v("postgres")]),t._v(" database:")]),t._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[t._v("sudo")]),t._v(" docker-compose build\n")])]),t._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[t._v("1")]),e("br")])]),e("p",[t._v("Then start both services:")]),t._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[t._v("sudo")]),t._v(" docker-compose up\n")])]),t._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[t._v("1")]),e("br")])]),e("h2",{attrs:{id:"run-tests"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#run-tests"}},[t._v("#")]),t._v(" Run Tests")]),t._v(" "),e("p",[t._v("Before running the unit tests be sure to have the project installed with "),e("a",{attrs:{href:"#Installation"}},[t._v("Installation")])]),t._v(" "),e("p",[t._v("To run the unit tests, simple run:")]),t._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[t._v("npm")]),t._v(" run "),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("test")]),t._v("\n")])]),t._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[t._v("1")]),e("br")])]),e("p",[t._v("To run the integration tests you need to first login as the root user (because of docker):")]),t._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[t._v("sudo")]),t._v(" -s\n"),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("npm")]),t._v(" run test:integration\n")])]),t._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[t._v("1")]),e("br"),e("span",{staticClass:"line-number"},[t._v("2")]),e("br")])]),e("br")])}),[],!1,null,null,null);s.default=n.exports}}]);